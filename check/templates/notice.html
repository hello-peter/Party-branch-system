<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description = " content="成都大学信息科学与工程学院学生党支部" />
    <meta name="google-site-verification" content="z9dGrdChaZILafF_S0nS2-OftozFWJYFAHIIAdZ_V88" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>信工学院党支部</title>
    
    <!-- Google Fonts -->
    <link rel="shortcut icon" type="image/x-icon" href="../static/favicon.ico"/>
    <link href='http://fonts.googleapis.com/css?family=Arvo:400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>

    <!-- Bootstrap css form cdn -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    
    <!-- Font awesome css -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/custom_style.css">
    <link rel="stylesheet" href="/static/responsive.css">
    <link rel="stylesheet" href="/static/assistant.css">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/noticemain.css">

     <!-- Owl carousel 2 css -->
    <link rel="stylesheet" href="/static/css/owl.carousel.css">
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">

.block:before {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
}

/* The element to be centered, can
   also be of any width and height */ 
.centered {
  display: inline-block;
  vertical-align: middle;
  width: 50%;
}
    .block {
  text-align: center;
}
.assis_img{
  display: inline-block;
  height: auto;
  max-width: 100%;
}
.assis_intro{
    color : white;
    text-align: center; 
}
#sliders {
    height: 9%;
    position: relative;
}
</style>
<script src="https://code.jquery.com/jquery.min.js"></script>
<script src="/static/js/jquery.js"></script>
<script src="/static/js/notice.js"></script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
function siteTime(){
window.setTimeout("siteTime()", 1000);
var seconds = 1000
var minutes = seconds * 60
var hours = minutes * 60
var days = hours * 24
var years = days * 365
 
var today = new Date()
var todayYear = today.getFullYear()
var todayMonth = today.getMonth()
var todayDate = today.getDate()
var todayHour = today.getHours()
var todayMinute = today.getMinutes()
var todaySecond = today.getSeconds()
 
/* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
year - 作为date对象的年份，为4位年份值
month - 0-11之间的整数，做为date对象的月份
day - 1-31之间的整数，做为date对象的天数
hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
minutes - 0-59之间的整数，做为date对象的分钟数
seconds - 0-59之间的整数，做为date对象的秒数
microseconds - 0-999之间的整数，做为date对象的毫秒数 */
var t1 = Date.UTC(2020,0,14,11,19,00)
var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond)
var diff = t2-t1
 
var diffYears = Math.floor(diff/years)
var diffDays = Math.floor((diff/days)-diffYears*365)
var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours)
var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes)
var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds)
document.getElementById("sitetime").innerHTML=" 本站已运行"+diffYears+" 年 "+diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 "+diffSeconds+" 秒"
}
siteTime()
</script>
</head>
<body>
  
    <header class="header" >
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <div class="logo">
                        <h1><a href="">Hi</a></h1>
                        
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                        </div>                         
                    </div>
                </div>
                
                <div class="col-md-9">
                         

                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav navbar-right text-uppercase">
                        <li class="layui-nav-item"><a href= {% url 'index' %}>首页</a></li>
                        <li class="layui-nav-item"><a href= {% url 'timer' %}>计时系统</a></li>
                        <li class="layui-nav-item"><a href = {% url 'query' %}>查询系统</a></li>
                        <li class="layui-nav-item"><a href="https://weibo.com/u/6394953874?nick=%E6%88%90%E5%A4%A7%E4%BF%A1%E5%B7%A5%E6%96%B0%E9%9D%92%E5%B9%B4&is_hot=1">微博</a></li>
                        <li class="layui-nav-item"><a href="http://xgxy.cdu.edu.cn/p/42/">党建新闻</a></li>
                        <li class="layui-nav-item"><a href = {% url 'info' %}>信息公开</a></li>
                        
                        </ul>
                    </div>                    
                </div>
            </div>
            
        </div>
    </header> <!-- End header -->
    
    <section id="sliders">
       
        <div data-velocity="-.2" class="overlay-bg slide-bg"></div>
        <div class="container">
           
        </div>
    </section>
<br>
<br>
<div class="container">
    <div class="row">
        <div class="col-sm-2">
            <div class="list-group side-bar hidden-xs">
                
                {% for line in cateinfo%}
                    {% if forloop.first %}
                        <a href="{% url 'info'%}?page=1&cate={{line.id}}" class="list-group-item">{{line.catename}}</a>
                    {% else %}
                    <a href="{% url 'info'%}?page=1&cate={{line.id}}" class="list-group-item">{{line.catename}}</a>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="col-sm-7">
            <div class="news-list">
                <p>>>>{{catename}}</p>
                {% for line in detail_info %}
                <div class="news-list-item clearfix">
                    

                    <div class="col-xs-7">
                        <a href="{% url 'info_detail' %}?id={{line.id}}" class="title">{{line.title}}</a>
                        <div class="info">
                            <span>{{line.author}}</span>•
                            <span>{{line.date}}</span>
                        </div>
                    </div>
                </div>
                {% endfor %}

            </div>
              <div id="pages" class="text-center" >
        <nav>
            <ul class="pagination">
                <li class="step-links">
                {% if detail_info.has_previous %}
                    <a class='active' href="?page={{ detail_info.previous_page_number }}&cate={{cateid}}">上一页</a>
                {% endif %}
                <span class="current">
                    Page {{ detail_info.number }} of {{ detail_info.paginator.num_pages }}</span>
                {% if detail_info.has_next %}
                    <a class='active' href="?page={{ detail_info.next_page_number }}&cate={{cateid}}">下一页</a>
                {% endif %}
                </li></ul></nav>
        </div>
        </div>

      

        <div class="col-sm-3">
            <div class="search-bar">
                <input type="text"  id = "names" placeholder="搜索作者/标题">
                <input type="button" class="logbtn" id = "logbtn" onclick = "gogogo()" value="查询">
            </div>
        
            <div class="side-bar-card" id = "side-bar-card">
                <div class="card-title"></div>
                <div class="card-body">
                    <div class="list" id="list">
                        
                     
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
 <section class="footer-top section-padding block">
        <div class = 'centered'>
                    <p>友情链接：<a href="http://zzb.cdu.edu.cn/" style="color : white">成都大学党委组织部</a>｜<a href="http://www.12371.cn/" style="color : white">共产党员网</a>｜<a href="https://www.xuexi.cn/" style="color : white">学习强国</a>｜<a href="http://www.wenming.cn/" style="color : white">中国文明网</a></p>
					<p id="sitetime"></p>
					<p>Copyright © 2020 成都大学信息科学与工程学院学生党支部 版权所有</p>
        </div>
    </section> <!-- end footer top -->


    

    
    <!-- jQuery form CDN -->
    <script src="https://code.jquery.com/jquery.min.js"></script>
    
    <!-- Bootstrap form CDN -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    
    <!-- jQUery scrolly parallax -->
    <script src="/static/js/jquery.scrolly.js"></script>
    
    <!-- jQuery sticky -->
    <script src="/static/js/jquery.sticky.js"></script>
    
    <!-- jQuery easing -->
    <script src="/static/js/jquery.easing.1.3.min.js"></script>
    
    <!-- jQuery owl carousel -->
    <script src="/static/js/owl.carousel.min.js"></script>
    <!-- jQuery main script -->
    <script src="/static/js/main.js"></script>
    
    <script src="/static/glide.min.js" charset="utf-8"></script>
    
    <script>
      new Glide(".images",{
        type: 'carousel',
        perView: 5,
        focusAt: 'center',
        gap: 40,
        breakpoints: {
          1200:{
            perView: 3
          },
          800:{
            perView: 2
          }
        }
      }).mount();
		function gogogo(){
                function getCookie(name) {
                    var cookieValue = null;
                    if (document.cookie && document.cookie !== '') {
                        var cookies = document.cookie.split(';');
                        for (var i = 0; i < cookies.length; i++) {
                            var cookie = jQuery.trim(cookies[i]);
                            // Does this cookie string begin with the name we want?
                            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                break;
                            }
                        }
                    }
                    return cookieValue;
                }
                var csrftoken = getCookie('csrftoken');

                function csrfSafeMethod(method) {
                    // these HTTP methods do not require CSRF protection
                    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
                }
                $.ajaxSetup({
                    beforeSend: function(xhr, settings) {
                        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                            xhr.setRequestHeader("X-CSRFToken", csrftoken);
                        }
                    }
                });
                var info = $.trim($('#names').val());
                if (info.length == 0) 
                { 
                    alert('请输入查询内容'); 
                    $('#list').html("");
                    return;
                }
                $.ajax({
                url:'/infoajax/', 
                type:'post',  
                datatype: 'json',
                data:{'info':info},
                success:function(data) {
                    $('#list').html("");
                    
                    var str = "";
                    if (JSON.stringify(data.content) === '[]') {
                        alert('查询结果为空');
                        return false // 如果为空,返回false
                    }
                    for(var i in data.content){
                        
                        str += '<div class="item">' + '<a class="title" href="/infodetail/?id='+data.content[i].id + '">' + data.content[i].title + '</a>'
                        +'<div class="desc">发布者：' + data.content[i].author + '</div>'+'</div>' ;
                    }
                    document.getElementById("list").innerHTML = str;

                },
                error : function(XMLHttpRequestn) {
                    alert("false");
                }
            })
		}

</script>
        
    </script>
  </body>
</html>