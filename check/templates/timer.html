<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<link rel="shortcut icon" type="image/x-icon" href="../static/favicon.ico"/>
<link rel="stylesheet" href="../static/layui2/layui/css/layui.css">
 
    <!-- Google Fonts -->
    <link rel="shortcut icon" type="image/x-icon" href="../static/favicon.ico"/>
    <link href='http://fonts.googleapis.com/css?family=Arvo:400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>

    <!-- Bootstrap css form cdn -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    
    <!-- Font awesome css -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/custom_style.css">
    <link rel="stylesheet" href="/static/responsive.css">
    <link rel="stylesheet" href="/static/assistant.css">

     <!-- Owl carousel 2 css -->
    <link rel="stylesheet" href="/static/css/owl.carousel.css">
    
<head>
 <meta name="description = " content="成都大学信息科学与工程学院学生党支部." />
<meta name="google-site-verification" content="z9dGrdChaZILafF_S0nS2-OftozFWJYFAHIIAdZ_V88" />
<title>信工学院党支部</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
<!--
#clock strong {
	font-size: 150px;
	text-align: center;
	color:#ffdd00;
}
#title{
font-family : 微软雅黑,宋体;
font-size : 3em;
color : #1cf5e7;
}
-->
</style>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</head>

<body  style="background-image:url(../static/backgruand.jpg)">

    <header class="header" >
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <div class="logo">
                        <h1><a href="">Hi</a></h1>
                        
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                        </div>                         
                    </div>
                </div>
                
                <div class="col-md-9">
                         

                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav navbar-right text-uppercase">
                        <li class="layui-nav-item"><a href= {% url 'index' %}>首页</a></li>
                        <li class="layui-nav-item"><a href= {% url 'timer' %}>计时系统</a></li>
                        <li class="layui-nav-item"><a href = {% url 'query' %}>查询系统</a></li>
                        <li class="layui-nav-item"><a href="https://weibo.com/u/6394953874?nick=%E6%88%90%E5%A4%A7%E4%BF%A1%E5%B7%A5%E6%96%B0%E9%9D%92%E5%B9%B4&is_hot=1">微博</a></li>
                        <li class="layui-nav-item"><a href="http://xgxy.cdu.edu.cn/p/42/">党建新闻</a></li>
                        <li class="layui-nav-item"><a href = {% url 'info' %}>信息公开</a></li>
                        
                        </ul>
                    </div>                    
                </div>
            </div>
            
        </div>
    </header> <!-- End header -->

<table width="100%" height="auto" border="0"   onmousedown="show('btn_tr')" style="cursor:pointer"  >
  <tr >
    <td width="10%" height="150" align="left" valign="top">&nbsp;</td>
    <td width="80%">&nbsp;</td>
    <td width="10%" align="right" valign="top">&nbsp;</td>
  </tr>
  <tr>
    <td height="214">&nbsp;</td>
    <td align="center"><span id="clock">
    <p id = 'title'>信工党支部考试计时系统</p>
    <strong>00:00:00</strong></span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td height="63">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>


</table>
<div style="text-align:center" id = 'btn_tr'>

             时：
            <input id="hinput"  type="text" value="00" style="width:30px;text-align:center;"/> 
            &nbsp
            分：
            <input id="minput"  type="text" value="00" style="width:30px;text-align:center;"/>
            &nbsp
            秒：
            <input id="sinput"  type="text" value="00" style="width:30px;text-align:center;"/>
            <br>
            <br>
            <input id="setB" type="button" value="设置" onclick="setTime()" class="layui-btn layui-btn-radius layui-btn-primary" >
            
            <input id="startB" type="button" value="开始" onclick="run()" class="layui-btn layui-btn-radius layui-btn-warm">
            <input id="pauseB" type="button" value="暂停" onclick="pause()" class="layui-btn layui-btn-radius">
            <input id="endB" type="button" value="停止" onclick="stop()" class="layui-btn layui-btn-radius layui-btn-danger">
            <br />
            <!--<input id="fullscreenB" type="button" value="FullScreen" onclick="fullscreen()">-->
            <br>
            <br>
            <input id="hiddenB" type="button" value="隐藏控制面板" onclick="hid('btn_tr')" 	class="layui-btn layui-btn-lg">
            <br>
            <input id="clockHidden" type="hidden" value="00:00:00">
 
</div>
    <!--
<input id="diff" type="text">
<input id="next" type="text">
-->

<script language="Javascript">


var normalelapse = 1000;
var nextelapse = normalelapse;
var counter;
var startTime;
//var start = clock.innerText;
var finish = "00:00:00";
var timer = null;


function fullscreen(){
	var WshShell = new ActiveXObject('WScript.Shell')
    WshShell.SendKeys('{F11}');
}
function pauseImage(){
	pause();
	image.innerHTML="<img  src='start.png' onmousemove=\"this.src='startB.png'\" onmouseout=\"this.src='start.png'\"  onclick='startImage();' style='cursor: pointer' title='Continue'/>";
}
function startImage(){
	run();
	image.innerHTML="<img  onmousemove=\"this.src='pauseB.png'\" onmouseout=\"this.src='pause.png'\" src='pause.png'  onclick='pauseImage();' style='cursor: pointer' title='pause'/>";
}
function show(id){
	document.getElementById(id).style.display="block";
}

function hid(id){
	document.getElementById(id).style.display="none";
}

function setTime(){
	 startB.disabled = false;
     pauseB.disabled = true;
     setB.disabled = false;
     var s = sinput.value;
     var m = minput.value;
     var h = hinput.value;
	 if(isNaN(h) || isNaN(m) || isNaN(s)){
		return;
	 }

    var sn = new Number(s);
    var mn = new Number(m);
    var hn = new Number(h);
	var ss = sn < 10 ? ("0" + sn) : s;
    var sm = mn < 10 ? ("0" + mn) : m;
    var sh = hn < 10 ? ("0" + hn) : h;
     var init = sh + ":" + sm + ":" + ss;

     clock.innerHTML = "<strong>"+init+"</strong>";
     clockHidden.value = init;
     window.clearTimeout(timer);
     window.clearInterval(timer);
}
function reset(){
	 sinput.value = "00" ;
     minput.value = "00" ;
     hinput.value = "00" ;

}
// 开始运行
function run() {
    startB.disabled = true;
    pauseB.disabled = false;
    setB.disabled = true;
	endB.disabled = false;
    counter = 0;
    // 初始化开始时间
    startTime = new Date().valueOf();

    // nextelapse是定时时间, 初始时为100毫秒
    // 注意setInterval函数: 时间逝去nextelapse(毫秒)后, onTimer才开始执行
    timer = window.setInterval("onTimer()", nextelapse);
}

// 暂停
function pause() {
    startB.disabled = false;
    pauseB.disabled = true;
    setB.disabled = false;
    window.clearTimeout(timer);
}
//停止
function stop(){
	 startB.disabled = false;
     pauseB.disabled = true;
     setB.disabled = false;
	 endB.disabled = true;
	 sinput.value = "00" ;
     minput.value = "00" ;
     hinput.value = "00" ;
	 clock.innerHTML = "<strong>00:00:00</strong>"
	 clockHidden.value = "00:00:00";
	 window.clearTimeout(timer);
	 window.clearInterval(timer);
}
window.onload = function() {
    pauseB.disabled = true;
}

// 倒计时函数
function onTimer()
{

    if (clockHidden.value == finish)
    {
        window.clearInterval(timer);
		clock.innerHTML = "<strong><font color=#013878>Time's up!</font></strong>"
        startB.disabled = true;
        pauseB.disabled = true;
        setB.disabled = false;
		endB.disabled = true;
        return;
    }

    //var hms = new String(clock.innerText).split(":");
    var hms = new String(clockHidden.value).split(":");
    //var ms = new Number(hms[3]);
    var s = new Number(hms[2]);
    var m = new Number(hms[1]);
    var h = new Number(hms[0]);
        s -= 1;
        if (s < 0)
        {
            s = 59;
            m -= 1;
        }

        if (m < 0)
        {
            m = 59;
            h -= 1;
        }
    var ss = s < 10 ? ("0" + s) : s;
    var sm = m < 10 ? ("0" + m) : m;
    var sh = h < 10 ? ("0" + h) : h;

    //start = sh + ":" + sm + ":" + ss + ":" + ms;
    var nowtime = sh + ":" + sm + ":" + ss;
    clock.innerHTML = "<strong>"+nowtime+"</strong>";
    //倒计时1分钟时时间变红色
	if(s<=59 && m==0 && h==0){
        //setTimeout("onTimer2()",200);//红色时间闪烁
		clock.innerHTML = "<strong><font color=#bb0000>"+nowtime+"</font></strong>"
	}
    clockHidden.value = nowtime;
    // 清除上一次的定时器
    window.clearInterval(timer);

    // 自校验系统时间得到时间差, 并由此得到下次所启动的新定时器的时间nextelapse
    counter++;
    var counterSecs = counter * 1000;
    var elapseSecs = new Date().valueOf() - startTime;
    var diffSecs = counterSecs - elapseSecs;
    nextelapse = normalelapse + diffSecs;
    //diff.value = counterSecs + "-" + elapseSecs + "=" + diffSecs;
    //next.value = "nextelapse = " + nextelapse;
    if (nextelapse < 0) nextelapse = 0;

    // 启动新的定时器
    timer = window.setInterval("onTimer()", nextelapse);
}
function onTimer2(){
    var hms = new String(clockHidden.value);
    clock.innerHTML = "<strong><font color=#8b0000>"+hms+"</font></strong>";
}
function fullscreen(){
	var WsShell = new ActiveXObject('WScript.Shell')
	WsShell.SendKeys('{F11}');
}
/*
function onTimer3(){
    var hms = new String(clockHidden.value);
    clock.innerHTML = "<strong><font color=#8b0000>"+hms+"</font></strong>";
}
*/
        layui.use('element', function(){
  var element = layui.element;
  
  //…
});
</script>

</body>
</html>
